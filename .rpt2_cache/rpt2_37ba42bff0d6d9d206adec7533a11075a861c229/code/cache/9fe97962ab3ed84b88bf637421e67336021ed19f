{
  "code": "import { StaticDataManager } from \"../../../Tmpl/StaticDataManager\";\r\nimport { ShopManager } from \"../../Singleton/ShopManager\";\r\nexport default class PlankShopItem extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._tween = new Laya.Tween();\r\n        this._unlock = false;\r\n    }\r\n    onAwake() {\r\n        this._backBtn = this.owner;\r\n        this._icon = this._backBtn.getChildByName(\"icon\");\r\n        this._lock = this._backBtn.getChildByName(\"lock\");\r\n        this._check = this._backBtn.getChildByName(\"check\");\r\n        if (this._id) {\r\n            this._refreshItem(this._id);\r\n        }\r\n    }\r\n    onStart() {\r\n        this._backBtn.on(Laya.Event.CLICK, this, this._chooseSkin);\r\n    }\r\n    setData(id) {\r\n        if (!id) {\r\n            return;\r\n        }\r\n        this._id = id;\r\n        if (this._backBtn) {\r\n            this._refreshItem(id);\r\n        }\r\n    }\r\n    _refreshItem(id) {\r\n        let tmpl = StaticDataManager.getPlanksRecord(id);\r\n        this._unlock = ShopManager.instance().hasUnlock(id);\r\n        if (this._unlock) {\r\n            this._lock.visible = false;\r\n            if (ShopManager.instance().getChoosePlankID() == id) {\r\n                this._backBtn.skin = \"textures/grid_green.png\";\r\n                this._check.visible = true;\r\n            }\r\n            else {\r\n                this._backBtn.skin = \"textures/grid_blue.png\";\r\n                this._check.visible = false;\r\n            }\r\n            let spriteName = tmpl.SpriteName;\r\n            let url = `planks/${spriteName}.png`;\r\n            this._icon.skin = url;\r\n            this._icon.visible = true;\r\n            return;\r\n        }\r\n        this._backBtn.skin = \"textures/grid_grey.png\";\r\n        this._icon.visible = false;\r\n        this._check.visible = false;\r\n        this._lock.visible = true;\r\n    }\r\n    _chooseSkin() {\r\n        if (this._unlock) {\r\n            ShopManager.instance().choosePlank(this._id);\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Tmpl/StaticDataManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Extensions/Graphics.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/ShopManager.ts"
  ]
}
