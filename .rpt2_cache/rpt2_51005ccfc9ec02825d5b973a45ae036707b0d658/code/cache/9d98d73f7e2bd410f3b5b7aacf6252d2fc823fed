{
  "code": "import { CharactorManager, PlayerTitle } from \"../../Data/CharactorManager\";\r\nimport { MiniGameManager } from \"../../Data/MiniGameManager\";\r\nimport EventManager from \"../Singleton/EventManager\";\r\nimport { EventName } from \"../Singleton/GameDefine\";\r\nimport { PanelBase } from \"./PanelBase\";\r\nimport AudioManager from \"../Singleton/AudioManager\";\r\nimport { SdkUitl } from \"../../Util/SdkUitl\";\r\nexport default class Info extends PanelBase {\r\n    constructor() {\r\n        super();\r\n        this._progressItems = [];\r\n        this.onShowEnd = this.showEndCallBack;\r\n        this._startPosY = 0;\r\n        Info.instance = this;\r\n    }\r\n    onAwake() {\r\n        this._info = this.owner;\r\n        this._uiBox = this._info.getChildAt(0);\r\n        this._levelInfoBack = this._uiBox.getChildByName(\"LevelInfoBack\");\r\n        this._levelProgressBack = this._levelInfoBack.getChildByName(\"LevelProgressBack\");\r\n        for (let i = 0; i < this._levelProgressBack.numChildren; i++) {\r\n            this._progressItems[i] = this._levelProgressBack.getChildAt(i);\r\n        }\r\n        this._coinInfo = this._uiBox.getChildByName(\"CoinInfo\");\r\n        this._curLabel = this._levelInfoBack.getChildByName(\"CurBack\").getChildAt(0);\r\n        this._nextLabel = this._levelInfoBack.getChildByName(\"NextBack\").getChildAt(0);\r\n        this._titleBack = this._uiBox.getChildByName(\"TitleBack\");\r\n        this._titleImage = this._titleBack.getChildByName(\"Title\");\r\n        this._titleSeal = this._titleBack.getChildByName(\"Seal\");\r\n        EventManager.register(EventName.CHANGE_TITLE, this._titleChanged, this);\r\n        this._startPosY = this._titleBack.y;\r\n    }\r\n    onStart() {\r\n        if (SdkUitl.isLongHeight()) {\r\n            this._titleBack.y = this._startPosY + 150;\r\n        }\r\n    }\r\n    show(coin, level, title, result = false) {\r\n        super.show();\r\n        CharactorManager.instance().setPlayerTitle();\r\n        this._refreshTitle(title);\r\n        this._refreshCoinUI(coin);\r\n        this._refreshLevelInfoUI(level, result);\r\n    }\r\n    hide() {\r\n        super.hide();\r\n        Laya.Tween.clearAll(this._titleSeal);\r\n        Laya.Tween.clearAll(this._titleImage);\r\n        this._titleSeal.scale(1, 1);\r\n        this._titleImage.scale(1, 1);\r\n    }\r\n    getCoinInfoPos() {\r\n        return new Laya.Vector2(this._coinInfo.x, this._coinInfo.y);\r\n    }\r\n    _refreshCoinUI(show) {\r\n        this._coinInfo.visible = show;\r\n    }\r\n    _refreshLevelInfoUI(show, result) {\r\n        this._levelInfoBack.visible = show;\r\n        if (show) {\r\n            let level = MiniGameManager.instance().getSceneLevel();\r\n            let curLevel = Math.floor(level / 3) + 1;\r\n            let part = result ? level % 3 + 1 : level % 3;\r\n            this._curLabel.text = curLevel.toString();\r\n            this._nextLabel.text = (curLevel + 1).toString();\r\n            for (let i = 0; i < this._progressItems.length; i++) {\r\n                if (i < part) {\r\n                    this._progressItems[i].visible = true;\r\n                }\r\n                else {\r\n                    this._progressItems[i].visible = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _refreshTitle(show) {\r\n        if (!show) {\r\n            this._titleBack.visible = false;\r\n            return;\r\n        }\r\n        this._titleBack.visible = true;\r\n        let title = CharactorManager.instance().getPlayerTitle();\r\n        switch (title) {\r\n            case PlayerTitle.QINGTONG:\r\n                this._titleImage.skin = \"textures/title1.png\";\r\n                break;\r\n            case PlayerTitle.BAIYING:\r\n                this._titleImage.skin = \"textures/title2.png\";\r\n                break;\r\n            case PlayerTitle.HUANGJING:\r\n                this._titleImage.skin = \"textures/title3.png\";\r\n                break;\r\n            case PlayerTitle.BOJING:\r\n                this._titleImage.skin = \"textures/title4.png\";\r\n                break;\r\n            case PlayerTitle.ZHUANSHI:\r\n                this._titleImage.skin = \"textures/title5.png\";\r\n                break;\r\n            case PlayerTitle.DASHI:\r\n                this._titleImage.skin = \"textures/title6.png\";\r\n                break;\r\n            case PlayerTitle.WANGZHE:\r\n                this._titleImage.skin = \"textures/title7.png\";\r\n                break;\r\n        }\r\n    }\r\n    _titleChanged() {\r\n        Laya.Tween.clearAll(this._titleSeal);\r\n        Laya.Tween.clearAll(this._titleImage);\r\n        this._titleImage.scale(1.2, 1.2);\r\n        Laya.Tween.to(this._titleImage, { scaleX: 1, scaleY: 1 }, 150, Laya.Ease.backIn, null, 450);\r\n        this._titleSeal.scale(2.5, 2.5);\r\n        Laya.Tween.to(this._titleSeal, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.backIn, Laya.Handler.create(this, () => {\r\n            AudioManager.instance().playEffect(\"Seal\");\r\n        }), 450);\r\n    }\r\n    showEndCallBack() {\r\n    }\r\n}\r\nInfo.instance = null;\r\n",
  "references": [
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Data/CharactorManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Data/MiniGameManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/EventManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/GameData.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/GameDefine.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/UI/PanelBase.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/UI/Shop.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/AudioManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Util/SdkUitl.ts"
  ]
}
