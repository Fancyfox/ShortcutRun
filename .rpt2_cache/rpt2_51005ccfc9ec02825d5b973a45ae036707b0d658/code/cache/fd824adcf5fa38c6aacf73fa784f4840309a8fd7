{
  "code": "import EventManager from \"../script/Singleton/EventManager\";\r\nimport { EventName } from \"../script/Singleton/GameDefine\";\r\nimport { Configuration } from \"./Configuration\";\r\nimport { Constants } from \"./Constants\";\r\nexport var PlayerTitle;\r\n(function (PlayerTitle) {\r\n    PlayerTitle[\"QINGTONG\"] = \"\\u642C\\u7816\\u9752\\u94DC\";\r\n    PlayerTitle[\"BAIYING\"] = \"\\u642C\\u7816\\u767D\\u94F6\";\r\n    PlayerTitle[\"HUANGJING\"] = \"\\u642C\\u7816\\u9EC4\\u91D1\";\r\n    PlayerTitle[\"BOJING\"] = \"\\u642C\\u7816\\u94C2\\u91D1\";\r\n    PlayerTitle[\"ZHUANSHI\"] = \"\\u642C\\u7816\\u7816\\u77F3\";\r\n    PlayerTitle[\"DASHI\"] = \"\\u642C\\u7816\\u5927\\u5E08\";\r\n    PlayerTitle[\"WANGZHE\"] = \"\\u642C\\u7816\\u738B\\u8005\";\r\n})(PlayerTitle || (PlayerTitle = {}));\r\nexport class CharactorManager {\r\n    constructor() {\r\n        this.playerTitle = PlayerTitle.HUANGJING;\r\n    }\r\n    static instance() {\r\n        if (!this._instance) {\r\n            this._instance = new CharactorManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n    loadFromCache() {\r\n        const playerInfo = Configuration.instance().getConfigData(Constants.PlayerInfoID);\r\n        console.log(playerInfo, \"playerINfo++++++++++\");\r\n        if (playerInfo) {\r\n            this.playerInfo = JSON.parse(playerInfo);\r\n            if (!this.playerInfo.score) {\r\n                this.playerInfo.score = 0;\r\n            }\r\n        }\r\n        else {\r\n            this.playerInfo = {\r\n                money: 0,\r\n                score: 0\r\n            };\r\n        }\r\n    }\r\n    savePlayerInfoToCache() {\r\n        const data = JSON.stringify(this.playerInfo);\r\n        Configuration.instance().setConfigData(Constants.PlayerInfoID, data);\r\n    }\r\n    addMoney(money, delay = false) {\r\n        this.playerInfo.money += money;\r\n        this.savePlayerInfoToCache();\r\n        if (!delay) {\r\n            EventManager.dispatchEvent(EventName.ADD_MOENY);\r\n        }\r\n    }\r\n    reduceMoney(money) {\r\n        if (this.playerInfo.money >= money) {\r\n            this.playerInfo.money -= money;\r\n            this.savePlayerInfoToCache();\r\n            EventManager.dispatchEvent(EventName.REDUCE_MOENY);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    addScore(score) {\r\n        this.playerInfo.score += score;\r\n        this.savePlayerInfoToCache();\r\n        EventManager.dispatchEvent(EventName.ADD_SCORE);\r\n    }\r\n    setPlayerTitle() {\r\n        let score = this.playerInfo.score;\r\n        if (score < 15) {\r\n            this.playerTitle = PlayerTitle.QINGTONG;\r\n        }\r\n        else if (score >= 15 && score < 40) {\r\n            if (this.playerTitle != PlayerTitle.BAIYING) {\r\n                this.playerTitle = PlayerTitle.BAIYING;\r\n                EventManager.dispatchEvent(EventName.CHANGE_TITLE);\r\n            }\r\n        }\r\n        else if (score >= 40 && score < 80) {\r\n            if (this.playerTitle != PlayerTitle.HUANGJING) {\r\n                this.playerTitle = PlayerTitle.HUANGJING;\r\n                EventManager.dispatchEvent(EventName.CHANGE_TITLE);\r\n            }\r\n        }\r\n        else if (score >= 80 && score < 140) {\r\n            if (this.playerTitle != PlayerTitle.BOJING) {\r\n                this.playerTitle = PlayerTitle.BOJING;\r\n                EventManager.dispatchEvent(EventName.CHANGE_TITLE);\r\n            }\r\n        }\r\n        else if (score >= 140 && score < 200) {\r\n            if (this.playerTitle != PlayerTitle.DASHI) {\r\n                this.playerTitle = PlayerTitle.DASHI;\r\n                EventManager.dispatchEvent(EventName.CHANGE_TITLE);\r\n            }\r\n        }\r\n        else {\r\n            if (this.playerTitle != PlayerTitle.WANGZHE) {\r\n                this.playerTitle = PlayerTitle.WANGZHE;\r\n                EventManager.dispatchEvent(EventName.CHANGE_TITLE);\r\n            }\r\n        }\r\n    }\r\n    getPlayerTitle() {\r\n        return this.playerTitle;\r\n    }\r\n}\r\nCharactorManager._instance = null;\r\n",
  "references": [
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/EventManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/GameDefine.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Data/Configuration.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Data/Constants.ts"
  ]
}
