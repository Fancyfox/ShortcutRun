{
  "code": "import EventManager from \"../script/Singleton/EventManager\";\r\nimport GameData from \"../script/Singleton/GameData\";\r\nimport { EventName } from \"../script/Singleton/GameDefine\";\r\nimport Obj from \"./Obj\";\r\nexport default class Water extends Obj {\r\n    onAwake() {\r\n        super.onAwake();\r\n        this._water = this.owner;\r\n        this._mat = this._water.meshRenderer.material;\r\n        EventManager.register(EventName.CHANGE_WATER, this.SetWaterTexture, this);\r\n    }\r\n    onDestroy() {\r\n        EventManager.unRegister(EventName.CHANGE_WATER, this.SetWaterTexture, this);\r\n    }\r\n    init(data) {\r\n        super.init(data);\r\n    }\r\n    onUpdate() {\r\n        if (Laya.timer.delta >= 100) {\r\n            return;\r\n        }\r\n        this.WaterFloat();\r\n    }\r\n    WaterFloat() {\r\n        if (!this._mat) {\r\n            return;\r\n        }\r\n        let uv_y = this._mat.tilingOffsetY;\r\n        let uv_x = this._mat.tilingOffsetX;\r\n        let timer = Laya.timer.delta / 1000;\r\n        this._mat.tilingOffsetY += 0.01 * 0.02 * (Math.sin(uv_x * 3.5 + timer * 0.35) + Math.sin(uv_x * 4.8 + timer * 1.05) + Math.sin(uv_x * 7.3 + timer * 0.45)) / 3.0;\r\n        this._mat.tilingOffsetX += 0.12 * 0.02 * (Math.sin(uv_y * 4.0 + timer * 0.5) + Math.sin(uv_y * 6.8 + timer * 0.75) + Math.sin(uv_y * 11.3 + timer * 0.2)) / 3.0;\r\n        this._mat.tilingOffsetY += 0.12 * 0.02 * (Math.sin(uv_x * 4.2 + timer * 0.64) + Math.sin(uv_x * 6.3 + timer * 1.65) + Math.sin(uv_x * 8.2 + timer * 0.45)) / 3.0;\r\n    }\r\n    SetWaterTexture(index) {\r\n        this._mat.albedoTexture = GameData.waterTex_map.get(index.toString());\r\n    }\r\n}\r\n",
  "references": [
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/EventManager.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/GameData.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/script/Singleton/GameDefine.ts",
    "D:/WorkSpace/Laya2.6.1/ShortcutRun/src/Entity/Obj.ts"
  ]
}
